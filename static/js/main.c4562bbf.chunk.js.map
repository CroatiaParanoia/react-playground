{"version":3,"sources":["components/DynamicForm/index.tsx","App.tsx","pages/TodoList/page.mobile.tsx","pages/TodoList/page.pc.tsx","pages/TodoList/index.tsx","pages/TodoList/todoList.ts","pages/404/index.tsx","router.tsx","serviceWorker.ts","mock/index.ts","mock/apis/todoList.ts","mock/constant.ts","index.tsx"],"names":["DynamicForm","dataSource","value","useState","innerDataSource","setInnerDataSource","onCheckboxChange","useCallback","checked","attrId","attrValue","produce","draftState","forEach","item","attrValueSelected","filter","v","push","tableDataSource","useMemo","treeArr","fn","arr","length","firstItem","R","attrChildren","map","attrName","maxLevel","res","back","tree","path","originPath","itemKey","concat","join","newItem","key","newPath","rowItem","reduce","pre","tableColumn","title","dataIndex","useEffect","newInnerDataSource","index","renderItem","className","attrValues","attrValueItem","includes","onChange","e","target","columns","pagination","defaultSelectedList","App","TodoList","addTodoItem","inputValue","setInputValue","deleteTodoItem","toggleComplete","setComplete","onPressEnter","style","textDecoration","isComplete","label","type","onClick","size","bordered","Item","TodoListPage","platform","useParams","history","useHistory","View","todolistMobile","todolistPc","setDataSource","transTodoItem","assignInfo","createTodoItem","uuid","v4","setCompleteStatus","newDataSource","console","log","setUnComplete","updTodoItem","useTodoList","nextPlatformName","togglePlatform","replace","NotFoundPage","toTodolistPage","React","RouterComponent","exact","component","from","to","NotFound","Boolean","window","location","hostname","match","Mock","mock","success","message","Random","cparagraph","startMock","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error"],"mappings":"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","file":"static/js/main.c4562bbf.chunk.js","sourcesContent":["import React, { useEffect, useState, useCallback, useMemo } from 'react';\nimport produce from 'immer';\nimport * as R from 'ramda';\nimport { Checkbox, List, Table } from 'antd';\n\ninterface DataSourceItem {\n  attrName: string;\n  attrId: string;\n  attrValues: string[];\n}\n\ntype InnerDataSourceItem = DataSourceItem & {\n  attrValueSelected: string[];\n};\n\nconst DynamicForm: React.FC<{ dataSource: DataSourceItem[]; value: string[][] }> = ({\n  dataSource,\n  value\n}) => {\n  const [innerDataSource, setInnerDataSource] = useState<InnerDataSourceItem[]>([]);\n\n  const onCheckboxChange = useCallback(\n    (checked, attrId, attrValue) => {\n      const draftFn = (draftState: InnerDataSourceItem[]) => {\n        draftState.forEach((item) => {\n          if (item.attrId === attrId) {\n            item.attrValueSelected = item.attrValueSelected.filter((v) => v !== attrValue);\n\n            if (checked) item.attrValueSelected.push(attrValue);\n          }\n        });\n      };\n      setInnerDataSource(produce(innerDataSource, draftFn));\n    },\n    [innerDataSource, setInnerDataSource]\n  );\n\n  const tableDataSource = useMemo(() => {\n    interface TreeItem {\n      attrName: string;\n      attrId: string;\n      attrValue: string;\n      attrChildren: TreeItem[];\n    }\n\n    const fn = (arr: InnerDataSourceItem[]): TreeItem[] => {\n      if (!arr.length) {\n        return [];\n      }\n      const firstItem = R.head(arr);\n      const attrChildren = fn(R.tail(arr));\n      return firstItem!.attrValueSelected.map((item) => {\n        return {\n          attrName: firstItem!.attrName,\n          attrId: firstItem!.attrId,\n          attrValue: item,\n          attrChildren\n        };\n      });\n    };\n\n    const treeArr = fn(innerDataSource);\n\n    const maxLevel = innerDataSource.length;\n\n    const back = (tree: TreeItem, path?: any[], res: any[] = []) => {\n      if (!tree || !tree.attrChildren.length) {\n        return [];\n      }\n      const originPath = path || [\n        { attrName: tree.attrName, attrId: tree.attrId, attrValue: tree.attrValue }\n      ];\n      tree.attrChildren.forEach((item) => {\n        const itemKey = originPath\n          .map((v) => v.attrValue)\n          .concat(item.attrValue)\n          .join('-');\n        const newItem = {\n          attrName: item.attrName,\n          attrId: item.attrId,\n          attrValue: item.attrValue,\n          key: itemKey\n        };\n        const newPath = [...originPath, newItem];\n        back(item, newPath, res);\n        if (newPath.length === maxLevel) {\n          const rowItem = newPath.reduce(\n            (pre, item) => ({ ...pre, [item.attrId]: item.attrValue, key: item.key }),\n            {}\n          );\n          res.push(rowItem);\n        }\n      });\n\n      return res;\n    };\n\n    const res: any[] = [];\n\n    treeArr.forEach((item) => {\n      res.push(...back(item));\n    });\n    return res;\n  }, [innerDataSource]);\n\n  const tableColumn = useMemo(() => {\n    return innerDataSource.map((item) => {\n      return {\n        title: item.attrName,\n        dataIndex: item.attrId,\n        key: item.attrId\n      };\n    });\n  }, [innerDataSource]);\n\n  useEffect(() => {\n    const newInnerDataSource: InnerDataSourceItem[] = dataSource.map((item, index) => {\n      return {\n        ...item,\n        attrValueSelected: R.clone(value[index] || [])\n      };\n    });\n    setInnerDataSource(produce(newInnerDataSource, () => {}));\n  }, [dataSource, value, setInnerDataSource]);\n\n  const renderItem = useCallback(\n    (item: InnerDataSourceItem) => {\n      return (\n        <div className=\"df ac pt12 pb12\">\n          <div className=\"w120 mr12\">{item.attrName}</div>\n          <div className=\"f1 ac\">\n            {item.attrValues.map((attrValueItem) => {\n              return (\n                <Checkbox\n                  key={attrValueItem}\n                  checked={item.attrValueSelected.includes(attrValueItem)}\n                  onChange={(e) => onCheckboxChange(e.target.checked, item.attrId, attrValueItem)}\n                >\n                  {attrValueItem}\n                </Checkbox>\n              );\n            })}\n          </div>\n        </div>\n      );\n    },\n    [onCheckboxChange]\n  );\n\n  return (\n    <div>\n      <div>\n        <List dataSource={innerDataSource} renderItem={renderItem} />\n        <Table dataSource={tableDataSource} columns={tableColumn} pagination={false} />\n      </div>\n    </div>\n  );\n};\n\nexport default DynamicForm;\n","import React from 'react';\nimport './App.scss';\nimport DynamicForm from '@src/components/DynamicForm';\n\nconst defaultSelectedList = [\n  {\n    attrName: '型号',\n    attrId: '100001',\n    attrValues: ['大陆版', '港版', '台版']\n  },\n  {\n    attrName: '颜色',\n    attrId: '100002',\n    attrValues: ['红', '白', '黑']\n  },\n  {\n    attrName: '内存',\n    attrId: '100003',\n    attrValues: ['64G', '32G', '16G']\n  }\n];\n\nfunction App() {\n  return (\n    <div className=\"ml12 pl12\">\n      <DynamicForm dataSource={defaultSelectedList} value={[]} />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport { Input, Button, Space } from 'antd';\nimport { PageProps } from './types';\nconst TodoList: React.FC<PageProps> = ({\n  dataSource,\n  addTodoItem,\n  inputValue,\n  setInputValue,\n  deleteTodoItem,\n  setComplete,\n  toggleComplete\n}) => {\n  return (\n    <div>\n      <div>这是移动端页面</div>\n\n      <div>\n        <Input\n          value={inputValue}\n          onChange={(e) => setInputValue(e.target.value)}\n          onPressEnter={(e) => addTodoItem(inputValue)}\n        />\n      </div>\n      <div>\n        {dataSource.map((v) => {\n          return (\n            <div key={v.key} className=\"w100-percent fdr df jsb ac mt12 mb12\">\n              <div style={{ textDecoration: v.isComplete ? 'line-through' : '' }}>{v.label}</div>\n\n              <Space>\n                <Button type=\"ghost\" onClick={() => deleteTodoItem(v.key)}>\n                  删除\n                </Button>\n                <Button type=\"primary\" onClick={() => toggleComplete(v.key)}>\n                  {v.isComplete ? '取消完成' : '完成'}\n                </Button>\n              </Space>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nexport default TodoList;\n","import React from 'react';\nimport { Input, List, Space, Button } from 'antd';\nimport { PageProps } from './types';\nconst TodoList: React.FC<PageProps> = ({\n  dataSource,\n  addTodoItem,\n  inputValue,\n  setInputValue,\n  deleteTodoItem,\n  toggleComplete\n}) => {\n  return (\n    <div>\n      <div>这是PC端页面</div>\n      <div>\n        <Input\n          value={inputValue}\n          onChange={(e) => setInputValue(e.target.value)}\n          onPressEnter={(e) => addTodoItem(inputValue)}\n        />\n      </div>\n      <div>\n        <List\n          size=\"small\"\n          bordered\n          dataSource={dataSource}\n          renderItem={(item) => (\n            <List.Item className=\"df jsb\">\n              <div>{item.label}</div>\n              <Space>\n                <Button type=\"ghost\" onClick={() => deleteTodoItem(item.key)}>\n                  删除\n                </Button>\n                <Button type=\"primary\" onClick={() => toggleComplete(item.key)}>\n                  {item.isComplete ? '取消完成' : '完成'}\n                </Button>\n              </Space>\n            </List.Item>\n          )}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default TodoList;\n","import React, { useCallback, useMemo } from 'react';\nimport { Button } from 'antd';\nimport useTodoList from './todoList';\nimport todolistMobile from './page.mobile';\nimport todolistPc from './page.pc';\nimport { useParams, useHistory } from 'react-router';\n\nconst TodoListPage: React.FC<{}> = () => {\n  // const [data] = useRequest(getTodoList, { keywords: '', pageIndex: 1, pageSize: 10 }, []);\n  const { platform } = useParams<{ platform: 'mobile' | 'pc' }>();\n  const history = useHistory();\n  const View = platform === 'mobile' ? todolistMobile : todolistPc;\n\n  const {\n    inputValue,\n    setInputValue,\n    dataSource,\n    addTodoItem,\n    updTodoItem,\n    deleteTodoItem,\n    setComplete,\n    setUnComplete,\n    toggleComplete\n  } = useTodoList();\n\n  const nextPlatformName = useMemo(() => (platform === 'pc' ? 'mobile' : 'pc'), [platform]);\n\n  const togglePlatform = useCallback(() => {\n    history.replace(`/todolist/${nextPlatformName}`);\n  }, [history, nextPlatformName]);\n\n  return (\n    <div className=\"todolist-page\">\n      <Button onClick={togglePlatform}>切换到{nextPlatformName}</Button>\n\n      <View\n        inputValue={inputValue}\n        setInputValue={setInputValue}\n        dataSource={dataSource}\n        addTodoItem={addTodoItem}\n        updTodoItem={updTodoItem}\n        deleteTodoItem={deleteTodoItem}\n        setComplete={setComplete}\n        setUnComplete={setUnComplete}\n        toggleComplete={toggleComplete}\n      />\n    </div>\n  );\n};\n\nexport default TodoListPage;\n","import { useCallback, useState } from 'react';\nimport { TodoItem } from './types';\nimport uuid from 'uuid';\n\ntype PartialTodoItem = Partial<TodoItem>;\n\nexport default () => {\n  const [dataSource, setDataSource] = useState<TodoItem[]>([]);\n  const [inputValue, setInputValue] = useState('');\n  const transTodoItem = useCallback(\n    (key: string, assignInfo: PartialTodoItem | ((item: TodoItem) => PartialTodoItem)) => {\n      return dataSource.map((v) => {\n        if (v.key === key) {\n          return {\n            ...v,\n            ...(typeof assignInfo === 'function' ? assignInfo(v) : assignInfo)\n          };\n        }\n        return v;\n      });\n    },\n    [dataSource]\n  );\n\n  const createTodoItem = useCallback((label: string): TodoItem => {\n    return {\n      label,\n      isComplete: false,\n      key: uuid.v4()\n    };\n  }, []);\n\n  const setCompleteStatus = useCallback(\n    (key: string, isComplete: boolean) => {\n      const newDataSource = transTodoItem(key, { isComplete });\n      console.log(newDataSource, '2222');\n      setDataSource(newDataSource);\n    },\n    [transTodoItem, setDataSource]\n  );\n\n  const setComplete = useCallback(\n    (key: string) => {\n      setCompleteStatus(key, true);\n    },\n    [setCompleteStatus]\n  );\n\n  const setUnComplete = useCallback(\n    (key: string) => {\n      setCompleteStatus(key, false);\n    },\n    [setCompleteStatus]\n  );\n\n  const toggleComplete = useCallback(\n    (key: string) => {\n      setDataSource(\n        transTodoItem(key, (item) => {\n          return {\n            isComplete: !item.isComplete\n          };\n        })\n      );\n    },\n    [transTodoItem]\n  );\n\n  const deleteTodoItem = useCallback((key: string) => {\n    setDataSource((dataSource) => {\n      return dataSource.filter((v) => v.key !== key);\n    });\n  }, []);\n\n  const addTodoItem = useCallback(\n    (label: string) => {\n      if (!label) return;\n      setDataSource((dataSource) => {\n        return [...dataSource, createTodoItem(label)];\n      });\n      setInputValue('');\n    },\n    [createTodoItem]\n  );\n\n  const updTodoItem = useCallback(\n    (key: string, label: string) => {\n      setDataSource(transTodoItem(key, { label }));\n    },\n    [transTodoItem]\n  );\n\n  return {\n    inputValue,\n    setInputValue,\n    dataSource,\n    addTodoItem,\n    deleteTodoItem,\n    updTodoItem,\n    setComplete,\n    setUnComplete,\n    toggleComplete\n  };\n};\n","import React from 'react';\nimport { Button } from 'antd';\nimport { useHistory } from 'react-router-dom';\n\nconst NotFoundPage: React.FC<{}> = () => {\n  const history = useHistory();\n  const toTodolistPage = React.useCallback(() => {\n    history.push('/');\n  }, [history]);\n\n  return (\n    <div className=\"not-found-page\">\n      <div>404 没找到哦</div>\n      <Button type=\"ghost\" onClick={toTodolistPage}>\n        去首页\n      </Button>\n    </div>\n  );\n};\n\nexport default NotFoundPage;\n","import React from 'react';\nimport { HashRouter as Router, Route, Redirect, Switch } from 'react-router-dom';\nimport App from './App';\nimport TodoList from './pages/TodoList';\nimport NotFound from './pages/404';\n\nfunction RouterComponent() {\n  return (\n    <Router>\n      <Switch>\n        <Route exact path=\"/\" component={App} />\n        <Route exact path=\"/todolist/:platform\" component={TodoList} />\n        <Redirect exact from=\"/todolist\" to=\"/todolist/pc\" />\n        <Route exact path=\"/404\" component={NotFound} />\n        <Redirect exact from=\"/*\" to=\"/404\" />\n      </Switch>\n    </Router>\n  );\n}\n\nexport default RouterComponent;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\n/* tsignore: disabled */\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL!, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (response.status === 404 || (contentType != null && contentType.indexOf('javascript') === -1)) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import todoList from './apis/todoList';\n\nfunction startMock() {\n  todoList();\n}\n\nexport default startMock;\n","import Mock from 'mockjs';\nimport { baseUrl } from '../constant';\n\nexport default () => {\n  Mock.mock(`${baseUrl}/list`, 'get', {\n    success: true,\n    message: '请求成功',\n    'data|10-15': [\n      {\n        'value|1-10': () => Mock.Random.cparagraph(1),\n        'id|5': '',\n        'isFinish|1': false,\n      },\n    ],\n  });\n};\n","export const baseUrl = '/api';\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Router from './router';\n// import App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport startMock from './mock';\n\n// if (process.env.NODE_ENV === 'development') {\nstartMock();\n// }\n\nReactDOM.render(<Router />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}